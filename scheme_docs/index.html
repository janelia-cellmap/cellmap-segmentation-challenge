
<!DOCTYPE html>


<html lang="en" data-content_root="../" >

  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>CellMap Schemas &#8212; CellMap Segmentation Challenge</title>
  
  
  
  <script data-cfasync="false">
    document.documentElement.dataset.mode = localStorage.getItem("mode") || "";
    document.documentElement.dataset.theme = localStorage.getItem("theme") || "";
  </script>
  <!--
    this give us a css class that will be invisible only if js is disabled
  -->
  <noscript>
    <style>
      .pst-js-only { display: none !important; }

    </style>
  </noscript>
  
  <!-- Loaded before other Sphinx assets -->
  <link href="../_static/styles/theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />
<link href="../_static/styles/pydata-sphinx-theme.css?digest=8878045cc6db502f8baf" rel="stylesheet" />

    <link rel="stylesheet" type="text/css" href="../_static/pygments.css?v=a746c00c" />
    <link rel="stylesheet" type="text/css" href="../_static/styles/sphinx-book-theme.css?v=a3416100" />
    <link rel="stylesheet" type="text/css" href="../_static/custom.css?v=15603566" />
  
  <!-- So that users can add custom icons -->
  <script src="../_static/scripts/fontawesome.js?digest=8878045cc6db502f8baf"></script>
  <!-- Pre-loaded scripts that we'll load fully later -->
  <link rel="preload" as="script" href="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf" />
<link rel="preload" as="script" href="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf" />

    <script src="../_static/documentation_options.js?v=9eb32ce0"></script>
    <script src="../_static/doctools.js?v=9bcbadda"></script>
    <script src="../_static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../_static/scripts/sphinx-book-theme.js?v=887ef09a"></script>
    <script>DOCUMENTATION_OPTIONS.pagename = 'scheme_docs/index';</script>
    <link rel="icon" href="https://raw.githubusercontent.com/janelia-cellmap/cellmap-data/main/docs/source/_static/favicon.ico"/>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <meta name="docsearch:language" content="en"/>
  <meta name="docsearch:version" content="" />
  </head>
  
  
  <body data-bs-spy="scroll" data-bs-target=".bd-toc-nav" data-offset="180" data-bs-root-margin="0px 0px -60%" data-default-mode="">

  
  
  <div id="pst-skip-link" class="skip-link d-print-none"><a href="#main-content">Skip to main content</a></div>
  
  <div id="pst-scroll-pixel-helper"></div>
  
  <button type="button" class="btn rounded-pill" id="pst-back-to-top">
    <i class="fa-solid fa-arrow-up"></i>Back to top</button>

  
  <dialog id="pst-search-dialog">
    
<form class="bd-search d-flex align-items-center"
      action="../search.html"
      method="get">
  <i class="fa-solid fa-magnifying-glass"></i>
  <input type="search"
         class="form-control"
         name="q"
         placeholder="Search..."
         aria-label="Search..."
         autocomplete="off"
         autocorrect="off"
         autocapitalize="off"
         spellcheck="false"/>
  <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd>K</kbd></span>
</form>
  </dialog>

  <div class="pst-async-banner-revealer d-none">
  <aside id="bd-header-version-warning" class="d-none d-print-none" aria-label="Version warning"></aside>
</div>

  
    <header class="bd-header navbar navbar-expand-lg bd-navbar d-print-none">
    </header>
  

  <div class="bd-container">
    <div class="bd-container__inner bd-page-width">
      
      
      
        
      
      <dialog id="pst-primary-sidebar-modal"></dialog>
      <div id="pst-primary-sidebar" class="bd-sidebar-primary bd-sidebar">
        

  
  <div class="sidebar-header-items sidebar-primary__section">
    
    
    
    
  </div>
  
    <div class="sidebar-primary-items__start sidebar-primary__section">
        <div class="sidebar-primary-item">

  
    
  

<a class="navbar-brand logo" href="../index.html">
  
  
  
  
  
    
    
      
    
    
    <img src="https://raw.githubusercontent.com/janelia-cellmap/cellmap-data/main/docs/source/_static/CellMapLogo.png" class="logo__image only-light" alt="CellMap Segmentation Challenge - Home"/>
    <img src="https://raw.githubusercontent.com/janelia-cellmap/cellmap-data/main/docs/source/_static/CellMapLogo.png" class="logo__image only-dark pst-js-only" alt="CellMap Segmentation Challenge - Home"/>
  
  
</a></div>
        <div class="sidebar-primary-item">

<button class="btn search-button-field search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
 <i class="fa-solid fa-magnifying-glass"></i>
 <span class="search-button__default-text">Search</span>
 <span class="search-button__kbd-shortcut"><kbd class="kbd-shortcut__modifier">Ctrl</kbd>+<kbd class="kbd-shortcut__modifier">K</kbd></span>
</button></div>
        <div class="sidebar-primary-item"><nav class="bd-links bd-docs-nav" aria-label="Main">
    <div class="bd-toc-item navbar-nav active">
        <ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../index.html">CellMap Segmentation Challenge</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Data:</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../cellmap-schemas.html">CellMap Schemas</a></li>


<li class="toctree-l1"><a class="reference internal" href="../available_data.html">Available Data</a></li>
<li class="toctree-l1"><a class="reference internal" href="../annotation_classes.html">Annotation Classes</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">Train:</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1"><a class="reference internal" href="../dataloader.html">Creating a CellMap Data PyTorch Dataloader</a></li>
<li class="toctree-l1"><a class="reference internal" href="../load_model_weights.html">Loading a Pretrained Model Checkpoint</a></li>
</ul>
<p aria-level="2" class="caption" role="heading"><span class="caption-text">API:</span></p>
<ul class="nav bd-sidenav">
<li class="toctree-l1 has-children"><a class="reference internal" href="../cellmap_segmentation_challenge.html">cellmap_segmentation_challenge package</a><details open="open"><summary><span class="toctree-toggle" role="presentation"><i class="fa-solid fa-chevron-down"></i></span></summary><ul>
<li class="toctree-l2"><a class="reference internal" href="../cellmap_segmentation_challenge.cli.html">cellmap_segmentation_challenge.cli package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cellmap_segmentation_challenge.models.html">cellmap_segmentation_challenge.models package</a></li>
<li class="toctree-l2"><a class="reference internal" href="../cellmap_segmentation_challenge.utils.html">cellmap_segmentation_challenge.utils package</a></li>
</ul>
</details></li>
</ul>

    </div>
</nav></div>
    </div>
  
  
  <div class="sidebar-primary-items__end sidebar-primary__section">
      <div class="sidebar-primary-item">
<div id="ethical-ad-placement"
      class="flat"
      data-ea-publisher="readthedocs"
      data-ea-type="readthedocs-sidebar"
      data-ea-manual="true">
</div></div>
  </div>


      </div>
      
      <main id="main-content" class="bd-main" role="main">
        
        

<div class="sbt-scroll-pixel-helper"></div>

          <div class="bd-content">
            <div class="bd-article-container">
              
              <div class="bd-header-article d-print-none">
<div class="header-article-items header-article__inner">
  
    <div class="header-article-items__start">
      
        <div class="header-article-item"><button class="sidebar-toggle primary-toggle btn btn-sm" title="Toggle primary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
  <span class="fa-solid fa-bars"></span>
</button></div>
      
    </div>
  
  
    <div class="header-article-items__end">
      
        <div class="header-article-item">

<div class="article-header-buttons">





<div class="dropdown dropdown-download-buttons">
  <button class="btn dropdown-toggle" type="button" data-bs-toggle="dropdown" aria-expanded="false" aria-label="Download this page">
    <i class="fas fa-download"></i>
  </button>
  <ul class="dropdown-menu">
      
      
      
      <li><a href="../_sources/scheme_docs/index.md" target="_blank"
   class="btn btn-sm btn-download-source-button dropdown-item"
   title="Download source file"
   data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file"></i>
  </span>
<span class="btn__text-container">.md</span>
</a>
</li>
      
      
      
      
      <li>
<button onclick="window.print()"
  class="btn btn-sm btn-download-pdf-button dropdown-item"
  title="Print to PDF"
  data-bs-placement="left" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-file-pdf"></i>
  </span>
<span class="btn__text-container">.pdf</span>
</button>
</li>
      
  </ul>
</div>




<button onclick="toggleFullScreen()"
  class="btn btn-sm btn-fullscreen-button"
  title="Fullscreen mode"
  data-bs-placement="bottom" data-bs-toggle="tooltip"
>
  

<span class="btn__icon-container">
  <i class="fas fa-expand"></i>
  </span>

</button>



<button class="btn btn-sm nav-link pst-navbar-icon theme-switch-button pst-js-only" aria-label="Color mode" data-bs-title="Color mode"  data-bs-placement="bottom" data-bs-toggle="tooltip">
  <i class="theme-switch fa-solid fa-sun                fa-lg" data-mode="light" title="Light"></i>
  <i class="theme-switch fa-solid fa-moon               fa-lg" data-mode="dark"  title="Dark"></i>
  <i class="theme-switch fa-solid fa-circle-half-stroke fa-lg" data-mode="auto"  title="System Settings"></i>
</button>


<button class="btn btn-sm pst-navbar-icon search-button search-button__button pst-js-only" title="Search" aria-label="Search" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <i class="fa-solid fa-magnifying-glass fa-lg"></i>
</button>
<button class="sidebar-toggle secondary-toggle btn btn-sm" title="Toggle secondary sidebar" data-bs-placement="bottom" data-bs-toggle="tooltip">
    <span class="fa-solid fa-list"></span>
</button>
</div></div>
      
    </div>
  
</div>
</div>
              
              

<div id="jb-print-docs-body" class="onlyprint">
    <h1>CellMap Schemas</h1>
    <!-- Table of contents -->
    <div id="print-main-content">
        <div id="jb-print-toc">
            
            <div>
                <h2> Contents </h2>
            </div>
            <nav aria-label="Page">
                <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">CellMap Schemas</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#example-creating-an-n5-hierarchy-for-neuroglancer">Example: creating an N5 hierarchy for Neuroglancer</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#example-validating-a-container-with-the-cli">Example: validating a container with the cli</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cellmap-schemas-inspect"><code class="docutils literal notranslate"><span class="pre">cellmap-schemas</span> <span class="pre">inspect</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cellmap-schemas-check"><code class="docutils literal notranslate"><span class="pre">cellmap-schemas</span> <span class="pre">check</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#installation">Installation</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#contributing">Contributing</a></li>
</ul>

            </nav>
        </div>
    </div>
</div>

              
                
<div id="searchbox"></div>
                <article class="bd-article">
                  
  <section id="cellmap-schemas">
<h1>CellMap Schemas<a class="headerlink" href="#cellmap-schemas" title="Link to this heading">#</a></h1>
<p>This project contains a <span class="raw-html-md"><a href="https://docs.pydantic.dev/latest/"><code class="docutils literal"><span class="pre">pydantic</span></code></a></span>-based python library that formalizes data structures developed by the <a class="reference external" href="https://www.janelia.org/project-team/cellmap">Cellmap</a> project team at <a class="reference external" href="https://www.janelia.org/">Janelia Research Campus</a>.</p>
<p>Cellmap works with large (multi-TB) imaging datasets. We store our images with chunked array formats like <a class="reference external" href="https://github.com/saalfeldlab/n5">N5</a> and <a class="reference external" href="https://zarr.readthedocs.io/en/stable/">Zarr</a>, because these formats support performant I/O operations at the terabyte scale, and also because these file formats give developers a wide range of freedom in how arrays are organized, and what metadata is present. But with that freedom comes the need for applications to check whether the N5 or Zarr hierarchies they consume are correctly structured. To address this problem, this library provides <a class="reference external" href="https://docs.pydantic.dev/latest/">Pydantic models</a> of Cellmap-specific N5 / Zarr hierarchies which can be used for validating N5 / Zarr data.</p>
<section id="example-creating-an-n5-hierarchy-for-neuroglancer">
<h2>Example: creating an N5 hierarchy for Neuroglancer<a class="headerlink" href="#example-creating-an-n5-hierarchy-for-neuroglancer" title="Link to this heading">#</a></h2>
<p>In this example, we create an N5 hierarchy that complies with the <a class="reference external" href="https://github.com/google/neuroglancer/issues/176#issuecomment-553027775">Neuroglancer N5 convention</a>:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">cellmap_schemas.multiscale.neuroglancer_n5</span> <span class="kn">import</span> <span class="n">Group</span><span class="p">,</span> <span class="n">PixelResolution</span><span class="p">,</span> <span class="n">GroupMetadata</span>
<span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>

<span class="c1"># define a toy multiscale image</span>
<span class="n">data</span> <span class="o">=</span> <span class="n">np</span><span class="o">.</span><span class="n">arange</span><span class="p">(</span><span class="mi">16</span><span class="p">)</span><span class="o">.</span><span class="n">reshape</span><span class="p">(</span><span class="mi">4</span><span class="p">,</span><span class="mi">4</span><span class="p">)</span>
<span class="n">data_ds</span> <span class="o">=</span> <span class="n">data</span><span class="p">[::</span><span class="mi">2</span><span class="p">,</span> <span class="p">::</span><span class="mi">2</span><span class="p">]</span>
<span class="n">arrays</span> <span class="o">=</span> <span class="n">data</span><span class="p">,</span> <span class="n">data_ds</span>
<span class="n">scales</span> <span class="o">=</span> <span class="p">(</span><span class="mf">4.0</span><span class="p">,</span> <span class="mf">5.0</span><span class="p">),</span> <span class="p">(</span><span class="mf">8.0</span><span class="p">,</span> <span class="mf">10.0</span><span class="p">)</span>
<span class="n">units</span> <span class="o">=</span> <span class="s1">&#39;nm&#39;</span><span class="p">,</span> <span class="s1">&#39;nm&#39;</span>
<span class="n">axes</span> <span class="o">=</span> <span class="s1">&#39;y&#39;</span><span class="p">,</span><span class="s1">&#39;x&#39;</span>
<span class="n">units</span> <span class="o">=</span> <span class="s1">&#39;nm&#39;</span><span class="p">,</span><span class="s1">&#39;nm&#39;</span>
<span class="n">paths</span> <span class="o">=</span> <span class="s1">&#39;s0&#39;</span><span class="p">,</span> <span class="s1">&#39;s1&#39;</span>

<span class="c1"># the dimension_order parameter indicates that our axes and scales are in C order</span>
<span class="c1"># N5 metadata uses F order, and so those paramters will be flipped in the resulting</span>
<span class="c1"># metadata.</span>
<span class="n">group_model</span> <span class="o">=</span> <span class="n">Group</span><span class="o">.</span><span class="n">from_arrays</span><span class="p">(</span>
    <span class="n">arrays</span><span class="o">=</span><span class="n">arrays</span><span class="p">,</span>
    <span class="n">paths</span> <span class="o">=</span> <span class="n">paths</span><span class="p">,</span>
    <span class="n">scales</span><span class="o">=</span><span class="n">scales</span><span class="p">,</span>
    <span class="n">axes</span><span class="o">=</span><span class="n">axes</span><span class="p">,</span>
    <span class="n">units</span><span class="o">=</span><span class="n">units</span><span class="p">,</span>
    <span class="n">dimension_order</span><span class="o">=</span><span class="s2">&quot;C&quot;</span><span class="p">)</span>

<span class="c1"># print out the attributes of the group model</span>
<span class="c1"># note that the axes are flipped relative to their input order</span>
<span class="nb">print</span><span class="p">(</span><span class="n">group_model</span><span class="o">.</span><span class="n">model_dump</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="s1">&#39;members&#39;</span><span class="p">))</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">{</span>
<span class="sd">    &#39;zarr_version&#39;: 2,</span>
<span class="sd">    &#39;attributes&#39;: {</span>
<span class="sd">        &#39;axes&#39;: (&#39;x&#39;, &#39;y&#39;),</span>
<span class="sd">        &#39;units&#39;: (&#39;nm&#39;, &#39;nm&#39;),</span>
<span class="sd">        &#39;scales&#39;: ((1, 1), (2, 2)),</span>
<span class="sd">        &#39;pixelResolution&#39;: {&#39;dimensions&#39;: (5.0, 4.0), &#39;unit&#39;: &#39;nm&#39;},</span>
<span class="sd">    },</span>
<span class="sd">}</span>
<span class="sd">&quot;&quot;&quot;</span>

<span class="c1"># print out the members of the group model</span>
<span class="nb">print</span><span class="p">(</span><span class="n">group_model</span><span class="o">.</span><span class="n">model_dump</span><span class="p">(</span><span class="n">exclude</span><span class="o">=</span><span class="s1">&#39;attributes&#39;</span><span class="p">))</span>
<span class="sd">&quot;&quot;&quot;</span>
<span class="sd">{</span>
<span class="sd">    &#39;zarr_version&#39;: 2,</span>
<span class="sd">    &#39;members&#39;: {</span>
<span class="sd">        &#39;s0&#39;: {</span>
<span class="sd">            &#39;zarr_version&#39;: 2,</span>
<span class="sd">            &#39;attributes&#39;: {&#39;pixelResolution&#39;: {&#39;dimensions&#39;: (5.0, 4.0), &#39;unit&#39;: &#39;nm&#39;}},</span>
<span class="sd">            &#39;shape&#39;: (4, 4),</span>
<span class="sd">            &#39;chunks&#39;: (4, 4),</span>
<span class="sd">            &#39;dtype&#39;: &#39;&lt;i8&#39;,</span>
<span class="sd">            &#39;fill_value&#39;: 0,</span>
<span class="sd">            &#39;order&#39;: &#39;C&#39;,</span>
<span class="sd">            &#39;filters&#39;: None,</span>
<span class="sd">            &#39;dimension_separator&#39;: &#39;/&#39;,</span>
<span class="sd">            &#39;compressor&#39;: None,</span>
<span class="sd">        },</span>
<span class="sd">        &#39;s1&#39;: {</span>
<span class="sd">            &#39;zarr_version&#39;: 2,</span>
<span class="sd">            &#39;attributes&#39;: {</span>
<span class="sd">                &#39;pixelResolution&#39;: {&#39;dimensions&#39;: (10.0, 8.0), &#39;unit&#39;: &#39;nm&#39;}</span>
<span class="sd">            },</span>
<span class="sd">            &#39;shape&#39;: (2, 2),</span>
<span class="sd">            &#39;chunks&#39;: (4, 4),</span>
<span class="sd">            &#39;dtype&#39;: &#39;&lt;i8&#39;,</span>
<span class="sd">            &#39;fill_value&#39;: 0,</span>
<span class="sd">            &#39;order&#39;: &#39;C&#39;,</span>
<span class="sd">            &#39;filters&#39;: None,</span>
<span class="sd">            &#39;dimension_separator&#39;: &#39;/&#39;,</span>
<span class="sd">            &#39;compressor&#39;: None,</span>
<span class="sd">        },</span>
<span class="sd">    },</span>
<span class="sd">}</span>
<span class="sd">&quot;&quot;&quot;</span>
</pre></div>
</div>
<p>The above example did not write out any of the arrays to disk. To do this, you can use the <code class="docutils literal notranslate"><span class="pre">to_zarr</span></code>
method of <code class="docutils literal notranslate"><span class="pre">Group</span></code> to create a hierarchy in storage, then write the arrays.</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">from</span> <span class="nn">zarr</span> <span class="kn">import</span> <span class="n">N5FSStore</span>
<span class="n">store</span> <span class="o">=</span> <span class="n">N5FSStore</span><span class="p">(</span><span class="s1">&#39;path/to/n5/data.n5&#39;</span><span class="p">)</span>
<span class="n">group</span> <span class="o">=</span> <span class="n">group_model</span><span class="o">.</span><span class="n">to_zarr</span><span class="p">(</span><span class="n">store</span><span class="o">=</span><span class="n">store</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s1">&#39;image&#39;</span><span class="p">)</span>
<span class="n">group</span><span class="p">[</span><span class="s1">&#39;s0&#39;</span><span class="p">][:]</span> <span class="o">=</span> <span class="n">arrays</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
<span class="n">group</span><span class="p">[</span><span class="s1">&#39;s1&#39;</span><span class="p">][:]</span> <span class="o">=</span> <span class="n">arrays</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
</pre></div>
</div>
</section>
<section id="example-validating-a-container-with-the-cli">
<h2>Example: validating a container with the cli<a class="headerlink" href="#example-validating-a-container-with-the-cli" title="Link to this heading">#</a></h2>
<p>This package ships with a command-line tool than can be used for inspection or validation of N5 / Zarr containers.</p>
<section id="cellmap-schemas-inspect">
<h3><code class="docutils literal notranslate"><span class="pre">cellmap-schemas</span> <span class="pre">inspect</span></code><a class="headerlink" href="#cellmap-schemas-inspect" title="Link to this heading">#</a></h3>
<p>The command <code class="docutils literal notranslate"><span class="pre">cellmap-schemas</span> <span class="pre">inspect</span> <span class="pre">&amp;lt;url&amp;gt;</span></code> will print a summary of a Zarr array or group located at <code class="docutils literal notranslate"><span class="pre">&amp;lt;url&amp;gt;</span></code> to the command line.</p>
<p>In the following example, we create an array locally, then inspect it:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">zarr</span>
<span class="n">store</span> <span class="o">=</span> <span class="n">zarr</span><span class="o">.</span><span class="n">NestedDirectoryStore</span><span class="p">(</span><span class="s1">&#39;/tmp/tmp.zarr&#39;</span><span class="p">)</span>
<span class="n">array</span> <span class="o">=</span> <span class="n">zarr</span><span class="o">.</span><span class="n">open</span><span class="p">(</span><span class="n">store</span><span class="p">,</span> <span class="n">path</span><span class="o">=</span><span class="s1">&#39;test&#39;</span><span class="p">,</span> <span class="n">shape</span><span class="o">=</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span><span class="mi">10</span><span class="p">))</span>
<span class="n">array</span><span class="o">.</span><span class="n">attrs</span><span class="o">.</span><span class="n">put</span><span class="p">({</span><span class="s1">&#39;foo&#39;</span><span class="p">:</span> <span class="mi">10</span><span class="p">})</span>
</pre></div>
</div>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>cellmap-schemas<span class="w"> </span>inspect<span class="w"> </span>/tmp/tmp.zarr/test
</pre></div>
</div>
<p><span class="raw-html-md"><img src="https://janelia-cellmap.github.io/cellmap-schemas/static/cellmap_schemas_inspect_example_local_array.png" width=300  alt="cellmap-schemas inspect example local array output"/></span></p>
<p>We can also inspect the group that contains this array:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>cellmap-schemas<span class="w"> </span>inspect<span class="w"> </span>/tmp/tmp.zarr/
</pre></div>
</div>
<p><span class="raw-html-md"><img src="https://janelia-cellmap.github.io/cellmap-schemas/static/cellmap_schemas_inspect_example_local_group.png" width=300  alt="cellmap-schemas inspect example local group output"/></span></p>
<p>And we can inspect arrays or groups on cloud storage, too. Here we inspect an array (inspecting the group containing this array would produce too much text).</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>cellmap-schemas<span class="w"> </span>inspect<span class="w"> </span>s3://janelia-cosem-datasets/jrc_hela-2/jrc_hela-2.n5/em/fibsem-uint16/s0
</pre></div>
</div>
<p><span class="raw-html-md"><img src="https://janelia-cellmap.github.io/cellmap-schemas/static/cellmap_schemas_inspect_example_s3_array.png" width=300  alt="cellmap-schemas inspect example output"/></span></p>
</section>
<section id="cellmap-schemas-check">
<h3><code class="docutils literal notranslate"><span class="pre">cellmap-schemas</span> <span class="pre">check</span></code><a class="headerlink" href="#cellmap-schemas-check" title="Link to this heading">#</a></h3>
<p>The command <code class="docutils literal notranslate"><span class="pre">cellmap-schemas</span> <span class="pre">check</span> <span class="pre">&amp;lt;url&amp;gt;</span> <span class="pre">&amp;lt;model&amp;gt;</span></code> will attempt to validate the Zarr array or group located at <code class="docutils literal notranslate"><span class="pre">&amp;lt;url&amp;gt;</span></code> with <code class="docutils literal notranslate"><span class="pre">&amp;lt;model&amp;gt;</span></code>, where <code class="docutils literal notranslate"><span class="pre">&amp;lt;model&amp;gt;</span></code> is the name of a class in <code class="docutils literal notranslate"><span class="pre">cellmap-schemas</span></code>. When model validation fails, the validation error will be printed. When model validation succeeds, a small confirmation message is printed.</p>
<p>The Zarr array created in the earlier example will fail validation against the <code class="docutils literal notranslate"><span class="pre">mulitscale.cosem.Array</span></code> model:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>cellmap-schemas<span class="w"> </span>check<span class="w"> </span>/tmp/tmp.zarr/test<span class="w"> </span>multiscale.cosem.Array
</pre></div>
</div>
<p><span class="raw-html-md"><img src="https://janelia-cellmap.github.io/cellmap-schemas/static/cellmap_schemas_check_example_local_array.png" alt="cellmap-schemas check example local array output"/></span></p>
<p>But this N5 array stored on s3 passes validation:</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>$<span class="w"> </span>cellmap-schemas<span class="w"> </span>check<span class="w"> </span>s3://janelia-cosem-datasets/jrc_hela-2/jrc_hela-2.n5/em/fibsem-uint16/s0<span class="w"> </span>multiscale.cosem.Array
</pre></div>
</div>
<p><span class="raw-html-md"><img src="https://janelia-cellmap.github.io/cellmap-schemas/static/cellmap_schemas_check_example_s3_array.png" alt="cellmap-schemas check example output"/></span></p>
</section>
</section>
</section>
<section id="installation">
<h1>Installation<a class="headerlink" href="#installation" title="Link to this heading">#</a></h1>
<p><code class="docutils literal notranslate"><span class="pre">pip</span> <span class="pre">install</span> <span class="pre">-U</span> <span class="pre">cellmap-schemas</span></code></p>
</section>
<section id="contributing">
<h1>Contributing<a class="headerlink" href="#contributing" title="Link to this heading">#</a></h1>
<p>Raise issues on our <a class="reference external" href="https://github.com/janelia-cellmap/cellmap-schemas/issues">issue tracker</a>. For local development, see the <a class="reference external" href="./development.md">developer guide</a></p>
</section>


                </article>
              

              
              
              
              
                <footer class="prev-next-footer d-print-none">
                  
<div class="prev-next-area">
</div>
                </footer>
              
            </div>
            
            
              
                <dialog id="pst-secondary-sidebar-modal"></dialog>
                <div id="pst-secondary-sidebar" class="bd-sidebar-secondary bd-toc"><div class="sidebar-secondary-items sidebar-secondary__inner">


  <div class="sidebar-secondary-item">
  <div class="page-toc tocsection onthispage">
    <i class="fa-solid fa-list"></i> Contents
  </div>
  <nav class="bd-toc-nav page-toc">
    <ul class="visible nav section-nav flex-column">
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#">CellMap Schemas</a><ul class="visible nav section-nav flex-column">
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#example-creating-an-n5-hierarchy-for-neuroglancer">Example: creating an N5 hierarchy for Neuroglancer</a></li>
<li class="toc-h2 nav-item toc-entry"><a class="reference internal nav-link" href="#example-validating-a-container-with-the-cli">Example: validating a container with the cli</a><ul class="nav section-nav flex-column">
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cellmap-schemas-inspect"><code class="docutils literal notranslate"><span class="pre">cellmap-schemas</span> <span class="pre">inspect</span></code></a></li>
<li class="toc-h3 nav-item toc-entry"><a class="reference internal nav-link" href="#cellmap-schemas-check"><code class="docutils literal notranslate"><span class="pre">cellmap-schemas</span> <span class="pre">check</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#installation">Installation</a></li>
<li class="toc-h1 nav-item toc-entry"><a class="reference internal nav-link" href="#contributing">Contributing</a></li>
</ul>

  </nav></div>

</div></div>
              
            
          </div>
          <footer class="bd-footer-content">
            
<div class="bd-footer-content__inner container">
  
  <div class="footer-item">
    
<p class="component-author">
By Jeff Rhoades, Emma Avetissian, Davis Vann Bennett, Marwan Zouinkhi
</p>

  </div>
  
  <div class="footer-item">
    

  <p class="copyright">
    
      Â© Copyright 2024, Jeff Rhoades, Emma Avetissian, Davis Vann Bennett, Marwan Zouinkhi.
      <br/>
    
  </p>

  </div>
  
  <div class="footer-item">
    
  </div>
  
  <div class="footer-item">
    
  </div>
  
</div>
          </footer>
        

      </main>
    </div>
  </div>
  
  <!-- Scripts loaded after <body> so the DOM is not blocked -->
  <script defer src="../_static/scripts/bootstrap.js?digest=8878045cc6db502f8baf"></script>
<script defer src="../_static/scripts/pydata-sphinx-theme.js?digest=8878045cc6db502f8baf"></script>

  <footer class="bd-footer">
  </footer>
  </body>
</html>